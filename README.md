# Discord Utility Bot

A modular Discord bot using `discord.py` (v2) with **slash commands** only. Features:

- Admin-only moderation: ban, kick, purge, mute/timeout, lock & unlock channels.
- Auto-role on join: assigns **Member** if it exists.
- Role ID helper command for setup.
- Logs **everything** to: a rotating text file (`logs/bot.log`) **and** to Discord channels:
  - General Logs (message edits/deletions, joins/leaves, bans, kicks, locks): configured in `config.py`
  - Bot Logs (command usage, startup/shutdown, errors): configured in `config.py`
- Twitch live notifications (polling). **Requires** Twitch API credentials (client id + secret). See below.

## Quick Start

1) **Python 3.10+** recommended.

2) Install deps:
```bash
pip install -r requirements.txt
```

3) Put your **Discord bot token** into `token.txt` (single line).  
   ⚠️ Never commit or share tokens. If you posted one publicly, **regenerate it** in the Developer Portal.

4) Edit `config.py` and set your channel IDs (already filled from your links), and (optionally) Twitch credentials.

5) Run:
```bash
python main.py
```

## Twitch Notifications

- Fill `TWITCH_CLIENT_ID`, `TWITCH_CLIENT_SECRET`, and `TWITCH_USERNAME` in `config.py`.
- The bot will poll Twitch Helix (`/streams`) every 60s. When it detects a transition from **offline → live**, it posts an announcement in `ANNOUNCEMENT_CHANNEL_ID` with the stream title and link.
- If credentials are missing or invalid, Twitch polling is **disabled** automatically and the bot will log a warning in **Bot Logs** and `logs/bot.log`.

## Permissions / Intents

- This bot uses `members`, `message_content` and other guild intents to capture edits/deletes for logging and to auto‑assign roles.
- In the Developer Portal, enable the **Message Content Intent** and **Server Members Intent**.

## Admin Role

Commands are restricted to members with role named **Admin+ Perms**. Change this name in `config.py` if needed.

## Project Structure

```
discord_utility_bot/
  main.py
  config.py
  requirements.txt
  token.txt                # <-- place your bot token here
  logs/
    bot.log                # autogenerated
  utils/
    logger.py
    checks.py
  cogs/
    moderation.py
    utility.py
    autoroles.py
    logging_cog.py
    twitch.py
```
